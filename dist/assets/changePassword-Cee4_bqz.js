import{_,r as d,u as g,b as w,o as h,c as x,d as t,w as c,v as u,t as y,e as b,f as k,g as C}from"./index-CeCSVyLs.js";import{_ as V,a as B,b as I,Q as U}from"./index-B_uTThzT.js";import{a as p}from"./axios-BimPEqV4.js";const N={class:"container"},D={class:"banner"},E={class:"secondBanner"},L={class:"coreBusiness"},P={class:"loginInput"},Q={class:"account"},R={class:"password"},T={class:"checkCode"},$=["disabled"],M={class:"else",style:{margin:"84px 0"}},S={__name:"changePassword",setup(j){const l=d(""),i=d(""),n=d(""),a=d(0),v=g(),m=async()=>{if(!l.value){alert("邮箱不能为空");return}try{const s=await p({method:"post",url:`http://www.femto.fun/verify-email?email=${l.value}&action=1`});if(s.data.code===409)alert("请求有误");else if(s.data.code===200){alert("验证码发送成功"),a.value=60;const e=setInterval(()=>{a.value--,a.value===0&&clearInterval(e)},1e3)}else alert("验证码发送失败")}catch(s){console.error("Error:",s),alert("验证码发送失败")}},f=()=>{if(!l.value){alert("邮箱不能为空");return}if(!i.value){alert("密码不能为空");return}if(!n.value){alert("请输入验证码");return}try{const s={email:l.value,password:i.value,verifyCode:n.value};p.post("http://www.femto.fun/password-email",U.stringify(s)).then(e=>{const o=e.data;e.status===200?o.code===200?(console.log(o),alert("修改成功"),v.push("/")):o.code===401?(console.log(o),alert("验证码错误")):(console.log(o),alert("修改失败")):(console.error("修改请求失败:",e),alert("修改失败"))}).catch(e=>{console.error("修改请求失败:",e),alert("修改失败")})}catch(s){console.error(s),alert("修改失败")}};return(s,e)=>{const o=w("router-link");return h(),x("div",N,[t("div",D,[t("div",E,[e[8]||(e[8]=t("div",{class:"allLogo"},[t("img",{src:V,alt:"",style:{width:"46px",height:"71px","border-radius":"34px"}}),t("img",{src:B,alt:"",style:{width:"132px",height:"53px"}}),t("img",{src:I,alt:"",style:{width:"130px",height:"63px"}})],-1)),t("div",L,[e[7]||(e[7]=t("div",{class:"title"},"更改密码",-1)),t("div",P,[t("div",Q,[e[3]||(e[3]=t("div",{class:"img"},null,-1)),c(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>l.value=r),placeholder:"请输入邮箱"},null,512),[[u,l.value]])]),t("div",R,[e[4]||(e[4]=t("div",{class:"img"},null,-1)),c(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=r=>i.value=r),placeholder:"请输入密码"},null,512),[[u,i.value]])]),t("div",T,[e[5]||(e[5]=t("div",{class:"img"},null,-1)),c(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=r=>n.value=r),placeholder:"请输入验证码"},null,512),[[u,n.value]]),t("button",{onClick:m,disabled:a.value>0},y(a.value>0?`重新获取(${a.value})`:"获取验证码"),9,$)]),t("div",M,[b(o,{to:"/",class:"banckLogin",style:{float:"right"}},{default:k(()=>e[6]||(e[6]=[C(" 点击返回登录 ")])),_:1})]),t("button",{onClick:f},"更改密码")])])])])])}}},F=_(S,[["__scopeId","data-v-5f2bdcae"]]);export{F as default};
