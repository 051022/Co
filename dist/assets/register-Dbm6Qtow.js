import{_,u as w,r as n,b as y,o as h,c as x,d as t,w as u,v as c,t as b,e as C,f as V,g as k}from"./index-CeCSVyLs.js";import{_ as B,a as U,b as F,Q as I}from"./index-B_uTThzT.js";import{a as v}from"./axios-BimPEqV4.js";const R={class:"container"},N={class:"banner"},D={class:"secondBanner"},E={class:"coreBusiness"},Q={class:"loginInput"},T={class:"inputField account"},$={class:"inputField password"},L={class:"inputField password"},M={class:"inputField checkCode"},S=["disabled"],j={class:"else"},q={__name:"register",setup(z){const m=w(),o=n(""),i=n(""),p=n(""),d=n(""),a=n(0),f=async()=>{if(!o.value){alert("邮箱不能为空");return}try{const s=await v({method:"post",url:`http://www.femto.fun/verify-email?email=${o.value}&action=0`});if(s.data.code===409)alert("账号已注册！");else if(s.data.code===200){alert("验证码发送成功"),a.value=60;const e=setInterval(()=>{a.value--,a.value===0&&clearInterval(e)},1e3)}else alert("验证码发送失败")}catch(s){console.error("Error:",s),alert("验证码发送失败")}},g=async()=>{if(!o.value){alert("用户名不能为空");return}if(!i.value){alert("密码不能为空");return}if(p.value!==i.value){alert("两次输入密码不一致！");return}if(!d.value){alert("请输入验证码");return}try{const s={email:o.value,password:i.value,verifyCode:d.value};v.post("http://www.femto.fun/user-register-email",I.stringify(s)).then(e=>{const r=e.data;e.status===200?r.code===201?(console.log(loginRes),alert("注册成功"),m.push("/home")):r.code===401?(console.log(r),alert("验证码错误")):(console.log(r),alert("注册失败")):(console.error("注册请求失败:",e),alert("注册失败"))}).catch(e=>{console.error("注册请求失败:",e),alert("注册失败")})}catch(s){console.error(s),alert("注册失败")}};return(s,e)=>{const r=y("router-link");return h(),x("div",R,[t("div",N,[t("div",D,[e[10]||(e[10]=t("div",{class:"allLogo"},[t("img",{src:B,alt:"",style:{width:"46px",height:"71px","border-radius":"34px"}}),t("img",{src:U,alt:"",style:{width:"132px",height:"53px"}}),t("img",{src:F,alt:"",style:{width:"130px",height:"63px"}})],-1)),t("div",E,[e[9]||(e[9]=t("div",{class:"title"},null,-1)),t("div",Q,[t("div",T,[e[4]||(e[4]=t("div",{class:"img"},null,-1)),u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),placeholder:"请输入邮箱号"},null,512),[[c,o.value]])]),t("div",$,[e[5]||(e[5]=t("div",{class:"img"},null,-1)),u(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),placeholder:"请输入密码"},null,512),[[c,i.value]])]),t("div",L,[e[6]||(e[6]=t("div",{class:"img"},null,-1)),u(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=l=>p.value=l),placeholder:"请再次输入密码"},null,512),[[c,p.value]])]),t("div",M,[e[7]||(e[7]=t("div",{class:"img"},null,-1)),u(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),placeholder:"请输入验证码"},null,512),[[c,d.value]]),t("button",{onClick:f,disabled:a.value>0},b(a.value>0?`重新获取(${a.value})`:"获取验证码"),9,S)])]),t("div",j,[C(r,{to:"/",style:{float:"right"}},{default:V(()=>e[8]||(e[8]=[k("已有账号？立即登录")])),_:1})]),t("button",{class:"regigsterButton",onClick:g},"注册")])])])])}}},J=_(q,[["__scopeId","data-v-c900ce91"]]);export{J as default};
